# 1. 네트워크의 큰 그림

## 네트워크의 기본 구조

- 네트워크는 노드와 간선으로 구성된 그래프의 형태를 가진다.

- 여기서 네트워크 기기가 노드이며, 유무선 통신 매체(LAN선, WIFI 등)가 간선이다.
- 노드 간 연결 구조를 네트워크 토폴로지라고 부른다.
- 트리형, 링형, 버스형 등 다양한 유형이 존재하면 각각의 장단점이 존재한다.(비용, 가용성 측면)
- 호스트란, 네트워크를 통해 정보를 주고 받는 과정에서 양 끝단에 위치한 주체들을 의미한다. 내 노트북으로 구글에 접속하면, 내 노트북과 구글 서버는 호스트가 되는 것이다.
- 요청을 보내는 호스트를 클라이언트, 응답을 보내는 호스트를 서버라고 한다.
- 중간 노드란, 호스트가 데이터를 주고받을 수 있는 매개 노드를 의미하며 스위치, 라우터, 공유기 등이 존재한다.

LAN & WAN

- LAN이란, 가까운 거리를 연결하는 한정된 공간에서의 네트워크를 의미한다. 모든 기기들이 같은 네트워크에 속해있다.

- WAN이란 원거리 네트워크를 의미하며, LAN 간의 통신이 이루어진다. 즉, WAN은 여러 LAN과 이어진 하나의 큰 네트워크 그룹으로 설명 가능하다. ISP가 구축하고 관리한다.
    
    <img width="800" height="320" alt="image" src="https://github.com/user-attachments/assets/da2db846-69a3-40c1-8a78-46740f58fcbc" />

패킷 교환 네트워크

- 패킷이란, 네트워크를 통해 데이터를 주고받을 경우, 데이터를 한 번 보내는 단위다.

- 패킷은 헤더 + 페이로드 + 트레일러로 구성되어 있다.
- 헤더와 트레일러는 부가 정보, 페이로드는 메인 정보를 담고있다.

주소의 개념과 전송 방식

- 주소 : 패킷의 헤더에 명시되는 정보로, IP와 MAC 주소로 구성되어 있다. 전송 방식과 대상 호스트를 특정할 수 있다.

- 전송 방식은 다음과 같다.
    - 유니캐스트

        - 송신지와 수신지가 일대일로 메세지르 주고 받는 방식

    - 브로드캐스트
        - 네트워크상의 모든 호스트에게 메세지를 전송하는 방식

        - 이 때, 전송 범위를 브로드캐스트 도메인이라고 하며, 이는 LAN의 범위와 같다(브로드캐스트 도메인 = LAN)

    - 멀티캐스트

        - 네트워크 내의 동일 그룹에 속한 호스트에만 전송하는 방식
        
    - 애니캐스트

        - 내트워크 내 동일 그룹에 속한 호스트 중 가장 가까운 호스트에게 전송하는 방식

## 두 호스트가 패킷을 주고 받는 과정

프로토콜

- 네트워크에서 통신을 주고 받는 노드 간의 합의된 규칙이나 방법이다. 즉 표준 규격이라고 말할 수 있다.

- 네트워크에서는 IP, ARP, ICMP, TCP, UDP 등 여러 네트워크가 존재한다.
- 프로토콜이 다를 경우, 그에 맞춰 패킷의 내용이 달라질 수 있다.(보통 패킷 해더가 달라진다)

네트워크 참조 모델

- 네트워크를 통해 데이터를 주고 받는 과정은 보통 “캡슐화 - 전송 - 역캡슐화” 과정이라고 표현된다.

- 캡슐화는 전송하려는 데이터에 추가적인 정보를 부과하는 과정을 의미하며, 역캡슐화는 해당 데이터를 해석하는 과정을 의미한다.
- 해당 과정은 계층적으로 표현될 수 있는데, 이를 표현한 것을 네트워크 참조 모델이라고 한다.
- 대표적으로 OSI 모델과 TCP/IP 모델이 존재한다.

OSI 모델

- 통신 단계를 7계층으로 나눈 네트워크 참조 모델이다.

- 다음 7계층으로 구성된다.
    - 응용 계층
        - 사용자와 가장 가까우며 여러 네트워크 서비스를 제공하는 계층이다.

        - HTTP, HTTS, DNS 등 다양한 프로토콜이 존재한다.

    - 표현 계층
        - 인코딩, 압축, 암호화 같은 작업을 수행한다.
    - 세션 계층
        - 응용 프로그램 간의 연결 상태를 관리하는 세션을 관리하기 위한 계층이다

        - 응용 프로그램의 연결 상태를 관리한다.(연결 생성 및 종료)
    - 전송 계층
        - 패킷의 순서와 유실 등 신뢰성을 관리한다.

        - TCP, UDP가 존재한다.
    - 네트워크 계층
        - LAN 을 넘어 다른 네트워크와 통신을 주고 받기 위해 필요한 계층

        - IP 주소가 필요하다.
    - 데이터 링크 계층
        - 같은 LAN에 속한 호스트끼리 정보를 주고 받기 위한 계층

        - 이를 위해 MAC 주소를 활용하며, 물리 계층을 통해 받은 정보를 검증한다
    - 물리 계층
        - 비트 신호를 주고 받는 계층
    

TCP/IP 모델

- OSI 모델과 비슷한 맥락을 가지지만, OSI에 모델에 비해 구현과 프로토콜에 중점을 둔 네트워크 모델이다.

- 다음 4계층으로 구성된다

    - 응용 계층

        - OSI 모델의 세션, 표현, 응용 계층을 합친 개념이다

    - 전송 계층
        - OSI 모델의 전송 계층과 같다
    - 인터넷 계층
        - OSI 모델의네트워크 계층과 유사하다
    - 네트워크 액세스 계층
        - OSI 모델의 데이터 링크 + 물리 계층과 유사하다

캡슐화와 비캡슐화

- 앞서 말했듯이, 패킷의 송수신 과정에서 패킷에 부가 정보를 추가한 뒤 전송하며, 받은 패킷에서 해당 부가 정보를 해석하는 과정이 수반되는데, 이를 각각 캡슐화, 역캡슐화라고 한다.

- 패킷을 송신하는 쪽에서는 상위 계층에서 하위 계층으로 정보를 보내며(캡슐화), 패킷을 수신하는 쪽에서는 하위 계층에서 상위 계층으로 정보를 받아들인다(역캡슐화).
- 네트워크 계층 구조에 맞춰 프로토콜을 계층별로 구성할 수 있다.
- 하나의 패킷은 헤더와 페이로드를 포함하며, 프로토콜의 목적과 특징에 따라 달라질 수 있다.
- 각 계층에서 주고받는 패킷을 지칭하는 이름이 다르다.
    - 그 이상의 계층 : 데이터, 메세지

    - 전송 계층 : 세그먼트(TCP), 데이터그램(UDP)
    - 네트워크 계층 : 패킷, 데이터그램
    - 데이터 링크 계층 : 프레임
    - 물리 계층 : 심볼, 비트
- 실제 데이터를 살펴보면, 실제 데이터 앞에 헤더, 뒤에 트레일러가 붙어있음을 확인할 수 있다.

<img width="875" height="487" alt="image2" src="https://github.com/user-attachments/assets/a13c2f15-82ba-402e-999f-7d0737935293" />

## 네트워크 지도 그리기

잘 그려보자.

## 네트워크 지도에 대한 개인적 이해(정확하지 않음)

LAN & WAN 그리고 다양한 장비들

- LAN은 학교, 회사와 같은 작은 범위를 가진 네트워크다. 주로 사설 IP 주소를 이용한다.
  
- LAN 범위 내에선 무선의 경우 AP, 유선의 경우 스위치를 통해 디바이스끼리 통신한다.
- LAN이 다른 네트워크와 통신하기 위해선 라우터를 거쳐야 하며, 이 라우터는 사설 IP를 공인 IP로 변경해주는 역할을 한다.

![image3](https://github.com/user-attachments/assets/bd888932-3c3d-41b9-9e2f-43bb77d113f4)

WIFI, 5G 상황에서 IP의 할당 방식

- WI-FI의 경우, LAN 에 속해있는 네트워크 주소와 연관된 IP를 할당받는다

- 5G의 경우, 통신사의 코어 네트워크의 할당에 따라 IP를 할당받는다 ?

# 2. 물리 계층과 데이터 링크 계층

## 이더넷

이더넷

- LAN 내의 호스트들이 정보를 올바르게 주고받을 수 있게 해주는 기술 중 하나다.(유선 네트워크 기술 표준)

- 통신 매체를 통해 신호를 송수신하는 방법, 데이터 링크 계층에서 주고받는 데이터 형식 등이 정의된 기술이다.
- 이더넷 표준은 기술 표준이며, 표준 정의 덕분에 네트워크 장비와의 호환 문제를 해결해준다.
- 대다수의 LAN 장비들이 특정 이더넷 표준을 따르며, 이더넷 표준에 따라 통신 매체의 종류, 신호 송수신 방법, 최대 지원 속도가 달라진다.

이더넷 프레임

- 이더넷 기반의 네트워크에서 주고받는 프레임을 의미한다. 오늘날 사용되는 이더넷 프레임은 Ethernet II 프레임이다.(데이터 구성 방식 중 하나다)

- 다음과 같은 구성을 가진다.
    - 프리앰블

        - 송수신지 동기화를 위해 사용되는 정보

        - 첫 7바이트는 10101010이며 마지막 바이트는 10101011이라는 값을 가진다.
        - 수신지는 프리앰블 바이트를 확인하여 이더넷 프레임이 수신되고 있다는 사실을 알 수 있다.
    - 송수신지 MAC 주소
        - 네트워크 인터페이스가 갖는 고유 주소다.

        - 보통 NIC라는 장치가 네트워크 인터페이스를 담당한다.
        - 한 호스트가 NIC가 여러 개를 가질 수 있으며, 이는 한 호스트가 여러 개의 MAC 주소를 가질 수 있음을 의미한다.
    - 타입 및 길이
        - 프레임의 크기 혹은 상위 계층 프로토콜 정보를 나타낸다. 1500 이하일 경우 프레임의 크기, 1536 이상일 경우 프로토콜을 나타낸다.

        - IPv4, IPv6, ARP 등이 기재될 수 있다.
    - 데이터
        - 상위 계층으로 전달하거나 전달 받을 데이터가 명시된다.

        - 페이로드는 1500 바이트를 기준으로 청크된다.
        - 해당 필드엔 IPv4와 같은 인터넷 계층을 나타내는 데이터가 존재하며, 인터넷 계층은 전송 계층 데이터를 품고, 전송 계층은 응용 계층 데이터를 품는 방식이다. (계층적 방식)
    - FCS
        - 프레임의 오류가 있는지 여부를 확인하기 위한 필드다.

        - CRC라는 오류 검출용 값이 명시된다. 송신지에서 데이터 + 계산된 CRC 값을 보내면, 수신지는 전달받은 데이터에 대한 CRC 값을 계산해 검증한다.
    
    <img width="3364" height="572" alt="image4" src="https://github.com/user-attachments/assets/da900bc8-a91d-4468-8747-fed37e989784" />


## 유무선 통신 매체

유선 매체 - 트위스티드 페어 케이블

- 구리선을 두 가닥씩 꼬아서 만든 동신 매체다. 전기적 신호르 주고받는다.

- 카테고리를 통해 성능을 알 수 있다.(Cat7, Cat8 등)
- 노이즈 차폐를 위해 다양한 실드가 존재하며, 이를 표기할 수 있다.

무선 매체 - 전파와 WiFi

- 무선랜 기술은 전파를 매개로 하며, 대중적으로 사용되는 기술은 와이파이다.

- 표준 규격에 따라 지원되는 최대 속도나 주파수 대역이 달라지며, 4와 5같은 숫자로 세대를 구분한다.
- 전파 통신을 주고받을 때, 주파수 대역이 겹치면 신호의 간섭이 발생할 수 있다.
- 이를 관리하기 위해 채널이라는 하위 주파수 개념을 생성하고, 해당 채널 대역에서 무선 통신이 이루어진다.(즉, 대역 밑에 채널이 존재한다. 2.4GHz는 대역이며 하위에 1, 2, 3은 채널 번호다)
- 채널은 주파수 범위를 의미하기 때문에 서로 겹칠 수 있고, 겹치면 성능 저하가 발생한다. 따라서 2.4GHz에서는 보통 1, 6, 11번 채널을 주로 사용하고, 5GHz 대역은 채널이 더 많아 간섭 문제가 상대적으로 적다.(2.4GHz 대역에는 1~13번 채널이 존재한다)
- 여러 무선 통신 기기를 연결해 무선 네트워크를 구성하는 장비를 AP라고 하며, AP를 중심으로 구성된 무선 네트워크를 서비스 셋이라고 한다. 서비스 셋 식별자를 SSID라고 하며, 이는 흔히 와이파이 이름으로 사용된다.

## 네트워크 인터페이스

- 네트워크 인터페이스란, 네트워크 상에서 노드와 통신 매체가 연결되는 지점을 의미한다. 이는 NIC라는 하드웨어가 담당한다.(NIC는 네트워크 인터페이스의 형상화)

- NIC는 MAC 주소가 부여되며, 통신 매체의 신호 ↔ 호스트로 변환하는 역할을 수행한다. 또한, MAC 주소를 토대로 패킷 정합성을 검증한다.
- NIC는 시스템 콜이 호출되면 송수신이 수행되고, 입출력이 완료되면 인터럽트를 통해 CPU에 작업이 완료됐음을 알린다. 대부분 DMA도 지원한다.
- NIC는 각각 성능이 다르다.

## 허브와 스위치

- 허브와 스위치는 물리 계층과 데이터 링크 계층의 중간 노드다.

물리 계층의 허브

- 허브는 물리 계층의 대표적인 네트워크 장비로, 여러 대의 호스트를 연결하는 장치다.

- 리피터 허브, 이더넷 허브 등이 존재하며, 허브에서 통신 매체를 연결하는 지점을 포트라고 한다.
- 허브는 전달 받은 신호를 모든 포트로 내보내며, 반이중 모드(송신과 수신을 번갈아 진행하는 방식)로 통신한다는 특징을 가진다.
- 반이중 모드에서 여러 호스트가 동시에 정보를 전달하면 충돌이 발생한다. 충돌이 발생하는 영역을 충돌 도메인이라고 한다. 허브에서 충돌이 발생할 수 있는 영역은 허브에 연결된 모든 호스트다.

데이터 링크 계층의 스위치

- 전달받은 신호를 목적지 호스트가 연결된 포트(물리적 포트)로만 내보내며, 전이중 모드를 지원한다.

- 스위치는 MAC 주소 학습 기능을 통해 특정 포트에만 신호를 전송할 수 있다. 이는 MAC 주소 테이블에서 관리하며, 메모리에 저장되는 방식으로 작동한다.
- 스위치는 VLAN 기능을 가지고 있다. 이는 같은 스위치에 연결된 모든 호스트를 여러 논리적인 네트워크로 나누는 기능이다. 즉, VLAN 기능은 호스트 그룹을 다른 LAN 범위로 분리하며, 다른 네트워크 대역을 할당한다. 각 그룹이 통신하기 위해선 네트워크 계층 이상의 장비가 필요하다.
