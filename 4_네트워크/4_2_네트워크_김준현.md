# 3. 네트워크 계층 - IP

IP (Internet Protocol) : 네트워크 계층의 가장 핵심적인 프로토콜 

## IP의 목적과 특징

1. 주소 지정 (addressing) : 네트워크 간의 통신 과정에서 호스트를 특정하는 것

2. 단편화 (fragmentation) : 데이터를 여러 IP 패킷으로 올바르게 쪼개어 보내는 것

- 특징 : 신뢰할 수 없는 통신, 비연결형 통신

### 주소 지정과 단편화

주소 지정은 **IP 주소**를 통해 이루어지며,이는 IP 패킷 헤더를 통해 알 수 있다.

<img width="588" height="374" alt="image" src="https://github.com/user-attachments/assets/6693dda5-6471-43a4-a259-16e68a0a7bc6" />

- 패킷을 올바르게 전송하기 위해서는 MAC 주소와 IP 주소가 모두 필요하다.

- 패킷의 송수신 과정에서 MAC 주소보다는 IP주소가 우선적으로 활용된다.

- 라우터 : 서로 다른 네트워크에 속한 두 호스트가 네트워크 간 통신을 수행할 때, IP 주소를 기반으로 패킷의 최적 경로를 결정하여 목적지까지 전달(라우팅)하는 네트워크 장비

### 신뢰할 수 없는 통신과 비연결형 통신


## IP 주소의 구조

### 클래스풀 주소 체계

### 클래스리스 주소 체계와 서브넷 마스크

## 공인 IP 주소와 사설 IP 주소

- 호스트의 IP 주소는 명령어 ipconfig/all (윈도우) 또는 ifconfig (맥OS, 리눅스) 입력하여 확인 가능

- 공인 IP 주소 : 고유한 IP 주소, 검색 사이트를 통해 확인 했던 IP 주소

- 사설 IP 주소 : 고유하지 않은 IP 주소, 사설 네트워크에서 사용하기 위한 IP 주소

  - 공유기(라우터)를 통해 일반적으로 할당됨
 
  - 해당 호스트가 속한 사설 네트워크 상에서만 유효한 주소이므로, 다른 네트워크 상의 사설 IP 주소와 중복될 수 있다.
 
  - 예약 IP 주소 범위
 
    - 10.0.0.0/8 (10.0.0.0 ~ 10.255.255.255)
   
    - 172.16.0.0/12 (172.16.0.0 ~ 172.31.255.255)
   
    - 192.168.0.0/16 (192.168.0.0 ~ 192.168.255.255) 

## IP 주소의 할당

호스트에 IP 주소를 할당하는 방법

1. 정적 할당 : 수작업을 통해 이루어진다.

2. 동적할당 : DHCP라는 프로토콜을 통해 이루어진다.

### 정적 할당

- 직접 수작업으로 IP 주소를 부여하는 방식

- 각 운영체제별(맥OS, 윈도우) IP 주소를 수동으로 설정하는 설정 또는 명령어가 있다.

- 정적 IP 주소를 부여하기 위해 필요한 값 :

  - 정적 IP 주소를 부여하고자 하는 IP 주소, 서브넷 마스크, 게이트웨이(라우터) 주소, DNS 주소 등

- 게이트웨이 : 서로 다른 네트워크를 연결하는 하드웨어적/소프트웨어적 수단

  - 기본 게이트웨이 : 호스트가 속한 네트워크의 외부로 나가기 위한 첫 기본 경로 

- DNS 주소 : 호스트가 도메인 네임을 토대로 IP 주소를 알아내기 위해 질의하는 서버의 주소

  - 도메인 네임 : IP 주소에 대응되는 기억할 수 있는 문자열로 호스트를 식별할 수 있는 수단

  - 호스트가 도메인 네임을 토대로, 이에 대응되는 IP 주소를 알아내려면 <도메인 네임, IP 주소> 쌍을 저장하는 서버(네임 서버, DNS 서버)에 질의해야 한다.
    
### 동적 할당: DHCP (Dynamic Host Configuration Protocol)

- 프로토콜을 통해 자동으로 IP 주소를 부여하는 방식


- DHCP 서버 : 호스트에 할당 가능한 IP 주소 목록을 관리하다가, IP 주소 할당 요청을 받았을 때 IP 주소를 할당해 주는 호스트

  - 라우터(공유기)가 DHCP 서버 역할을 수행

  - IP 주소를 동적으로 할당받고자 하는 호스트는 DHCP 서버와 메시지를 주고 받으며 동적 IP 주소를 할당받을 수 있다.

- 동적 IP 주소 : 동적 할당을 통해 할당된 IP 주소
    
  1. 동적 IP 주소에는 사용 가능한 기간(임대 기간)이 정해져 있다.

  2. 동적 IP 주소는 할당받을 때마다 다른 주소를 받을 수 있다.
 
## IP 전송 특징의 보완: ICMP

신뢰할 수 없는 전송과 연결을 수립하지 않는 전송이 반드시 나쁜 것일까? 그렇지 않다.

IP가 신뢰할 수 없는 비연결형 프로토콜인 주된 이유는 **성능**에 있다.

## IP 주소와 MAC 주소의 대응: ARP


# 4. 전송 계층 - TCP와 UDP

## TCP와 UDP의 목적과 특징

### 포트를 통한 프로세스 식별

### (비)신뢰성과 (비)연결형 보장

## TCP의 연결부터 종료까지

### TCP의 연결 수립

### TCP의 오류/흐름/혼잡 제어

### TCP의 종료

## TCP의 상태 관리
