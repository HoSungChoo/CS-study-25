# 1. 컴퓨터 구조의 큰 그림

## 컴퓨터가 이해하는 정보

- 컴퓨터가 이해할 수 있는 정보 : 데이터, 명령어

- 데이터는 명령어에 종속적인 정보, 명령의 대상, 명령어의 재료이다.

- 명령어를 실행하는 주체 : CPU

- CPU의 종류에 따라 실행 가능한 세부적인 명령어의 종류와 처리의 양상의 달라질 수 있다.

## 컴퓨터의 핵심 부품

- CPU(중앙처리장치), 메모리(주기억장치), 캐시 메모리, 보조기억장치, 입출력장치

### CPU (Central Processing Unit)

- 데이터와 명령어를 읽어들이고, 해석하고, 실행하는 부품

CPU의 주요 구성 요소

- 산술논리연산장치(ALU, Arithmetic and Login Unit)

  - 연산을 수행할 회로로 구성되어 있는 일종의 계산기

  - CPU가 처리할 명령어를 실질적으로 연산한다.

- 제어장치(CU, Control Unit)

  - 명령어를 해석해 제어 신호를 내보내는 장치

  - 제어 신호 : 부품을 작동시키기 위한 신호

- 레지스터 (register)

  - CPU 내부의 작은 임시 저장 장치

  - CPU가 처리하는 명령어는 레지스터에 저장되어서

    레지스터 값만 관찰해도 프로그램이 어떻게 실행되는지 알 수 있다.

### 메모리와 캐시 메모리

- 보통 메모리를 RAM으로 지칭한다.

- 메모리 : 현재 실행 중인 프로그램을 구성하는 데이터와 명령어를 저장하는 부품

- 프로그램이 실행되려면 그 프로그램이 이루는 데이터와 명령어가 메모리에 저장되어야 한다.

- CPU가 원하는 정보로 접근하기 위해서 **주소**가 필요하다.

- **휘발성**은 전원이 공급되지 않을 때, 저장하고 있는 정보가 지워지는 특성을 의미한다.

  - 메모리(RAM)은 휘발성 저장장치라 전원이 꺼지면 메모리에 저장된 정보가 모두 삭제된다.

- 캐시 메모리 (Cache Memory)

  - CPU가 조금이라도 더 빨리 메모리에 저장된 값에 접근하기 위해 사용하는 저장장치

  - CPU와 메모리 사이에는 반드시 하나 이상의 캐시 메모리가 존재한다.

  - CPU 안에 위치하기도 하고, 밖에 위치하기도 하며 여러 종류가 있다.

### 보조기억장치

- 전원이 꺼져도 저장된 정보가 사라지지 않는 **비휘발성** 저장 장치

- ex) 하드 디스크 드라이브, SSD, USB, SD 카드

- CPU가 보조기억장치에 저장된 프로그램을 실행하려면 메모리로 복사해야 한다.

### 입출력장치

- 컴퓨터 외부에 연결되어 컴퓨터 내부와 정보를 교환하는 장치

  - 입력장치 : 마우스, 키보드

  - 출력장치 : 스피커, 모니터, 프린터

### 메인 보드와 버스

- 메인보드에는 컴퓨터의 핵심 부품을 비롯한 여러 부품들을 연결할 수 있는 슬롯과 연결 단자들이 있다.

- 버스 : 각 컴퓨터 부품들이 정보를 주고받는 통로

<br>

# 2. 컴퓨터가 이해하는 정보

## 데이터 - 0과 1로 숫자 표현하기

## 데이터 - 0과 1로 문자 표현하기

## 명령어

### 기계어와 어셈블리어

- 기계어 : CPU가 이해할 수 있도록 0과 1로 표현된 정보를 있는 그대로 표현한 언어

- 어셈블리어 : 0과 1로 표현된 기계어를 읽기 편한 형태로 단순 번역한 언어

### 명령어 사이클

- CPU가 명령어를 처리하는 과정에서 프로그램 속 각각의 명령어들이 반복하며 실행되는 일정한 주기

<br>

# 3. CPU

## 레지스터

CPU 안에 있는 작은 임시 저장장치

### 1. 프로그램 카운터 (PC, Program Counter)

- 메모리에서 다음으로 읽어 들일 명령어의 주소를 저장한다.

### 2. 명령어 레지스터 (IR, Instruction Register)

- 해석할 명령어, 즉 메모리에서 방금 읽어 들인 명령어를 저장하는 레지스터

### 3. 범용 레지스터 (general purpose register)

- 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터

### 4. 플래그 레지스터 (flag register)

- 연산의 결과 혹은 CPU 상태에 대한 부가 정보인 플래그 (flag) 값을 저장하는 레지스터

### 5. 스택 포인터 (stack pointer)

- 메모리 내 스택 영역의 최상단 스택 데이터 위치를 가리키는 특별한 레지스터

## 인터럽트

- CPU의 작업을 방해하는 신호

- 종류 : 동기 인터럽트 / 비동기 (하드웨어) 인터럽트

  - 동기 인터럽트

    CPU에 의해 발생하는 인터럽트

    프로그래밍 오류와 같은 예외적인 상황을 마주쳤을 때 발생하는 인터럽트. (예외 라고 부른다.)

  - 비동기 인터럽트

    입출력장치에 의해 발생하는 인터럽트 (알림 역할)

    - CPU 명령 자체에서 인터럽트가 발생할 경우 : 동기

    - 외부에서 유입될 경우 : 비동기

### 하드웨어 인터럽트

- CPU는 효율적으로 명령어를 처리하기 위해 하드웨어 인터럽트를 사용한다.

### 예외 (동기 인터럽트)

- CPU 명령 실행 중 발생하는 예외 상황을 의미한다.

- 종류 : 폴트, 트랩, 중단, 소프트웨어 인터럽트

  - 폴트

    예외를 처리한 직후에 예외가 발생한 명령어부터 실행을 재개하는 예외

  - 트랩

    예외를 처리한 직후에 예외가 발생한 명렁어의 다음 명령어부터 실행을 재개하는 예외 (예 : 디버깅의 브레이크 포인트 )

  - 중단

    CPU가 실행 중인 프로그램을 강제로 중단시킬 수 밖에 없는 심각한 오류를 발견했을 때 발생하는 예외

  - 소프트웨어 인터럽트

    시스템 콜이 발생했을 때 발생하는 예외

<br>

## CPU 성능 향상을 위한 설계

### CPU 클럭 속도

- **클럭** : 컴퓨터의 부품을 일사불란하게 움직일 수 있게 하는 시간의 단위

- 클럭 속도 = CPU의 속도

- 클럭 속도를 필요 이상으로 높이면 발열이 심해져서 클럭 속도를 높이는 것만으로 CPU의 성능을 높이는 데에는 한계가 있다.

### 멀티코어와 멀티스레드

- 클럭 속도를 높이는 방법 이외 코어 수 혹은 스레드 수를 늘리는 방법으로 CPU의 성능을 높일 수 있다.

- **코어** : CPU 내에서 명령어를 읽어 들이고, 해석하고, 실행하는 부품

- **스레드** : 실행 흐름의 단위

  - 하드웨어 스레드 : 하나의 코어가 동시에 처리하는 명령어의 단위. 논리 프로세서 라고 부르기도 한다.

    - 멀티스레드 프로세서/CPU : 하나의 코어로 여러 명령어를 동시에 처리하는 CPU

      - 1코어 1스레드 CPU

        명령어를 읽고, 해석하고, 실행하는 부품 1개가 한 번에 하나의 명령어를 처리

      - 2코어 4스레드 CPU

        명령어를 읽고, 해석하고, 실행하는 부품 2개가 한 번에 4개의 명령어를 처리

  - 소프트웨어 스레드 : 하나의 프로그램에서 독립적으로 실행되는 단위

하드웨어 스레드와 소프트웨어 스레드의 차이는 **동시성**과 **병렬성** 이라는 키워드의 차이를 통해 좀 더 명확히 이해할 수 있다.

- 병렬성 : 작업을 물리적으로 동시에 처리하는 성질

- 동시성 : 동시에 작업을 처리하는 것처럼 보이는 성질

즉, 하드웨어 스레드는 **병렬성**을 구현하기 위한 물리적인 실행 단위에 가깝고, <br>
소프트웨어 스레드는 **동시성**을 구현하기 위한 논리적인 실행 단위에 가깝다.

## 파이프라이닝을 통한 명령어 병렬 처리

- **명령어 병렬 처리 기법(ILP, Instruction-Level Parallelism**)

  여러 명령어를 동시에 처리하여 CPU를 한시도 쉬지 않고 작동시킴으로써 CPU의 성능을 높이는 기법
